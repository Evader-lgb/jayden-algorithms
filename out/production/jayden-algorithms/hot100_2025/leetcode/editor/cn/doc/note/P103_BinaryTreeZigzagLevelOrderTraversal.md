# 103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå†

## ğŸ“ è§£é¢˜æ€è·¯ï¼ˆæ€»åˆ†ç»“æ„ï¼‰

### æ€»æ€è·¯
ä½¿ç”¨å±‚æ¬¡éå†ï¼ˆBFSï¼‰ç»“åˆåŒç«¯é˜Ÿåˆ—æˆ–åˆ—è¡¨åè½¬ï¼Œåœ¨å¶æ•°å±‚ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰è¿›è¡Œåè½¬æ“ä½œï¼Œå®ç°é”¯é½¿å½¢éå†ã€‚

### åˆ†æ­¥éª¤è¯¦è§£
1. **è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼šå¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨
2. **åˆå§‹åŒ–é˜Ÿåˆ—**ï¼šåˆ›å»ºé˜Ÿåˆ—ç”¨äºBFSéå†ï¼Œåˆå§‹åŠ å…¥æ ¹èŠ‚ç‚¹
3. **å±‚æ¬¡éå†**ï¼šå½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œå¾ªç¯å¤„ç†æ¯ä¸€å±‚
4. **å¤„ç†å½“å‰å±‚**ï¼šè®°å½•å½“å‰å±‚èŠ‚ç‚¹æ•°é‡ï¼Œéå†è¿™äº›èŠ‚ç‚¹
5. **é”¯é½¿å½¢æ§åˆ¶**ï¼šæ ¹æ®å±‚æ•°çš„å¥‡å¶æ€§å†³å®šèŠ‚ç‚¹å€¼çš„æ·»åŠ é¡ºåº
6. **æ·»åŠ å­èŠ‚ç‚¹**ï¼šå°†å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
7. **ä¿å­˜ç»“æœ**ï¼šå°†å½“å‰å±‚çš„ç»“æœåŠ å…¥æœ€ç»ˆç»“æœåˆ—è¡¨

## ğŸ·ï¸ ç®—æ³•å½’ç±»

**ä¸»è¦å½’ç±»**ï¼šäºŒå‰æ ‘ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ã€å±‚æ¬¡éå†  
**ç›¸å…³çŸ¥è¯†ç‚¹**ï¼šé”¯é½¿å½¢éå†ã€åŒç«¯é˜Ÿåˆ—ã€å±‚æ¬¡éå†å˜ç§  
**éš¾åº¦çº§åˆ«**ï¼šä¸­ç­‰  
**ç›¸ä¼¼é¢˜å‹**ï¼šäºŒå‰æ ‘çš„å±‚åºéå†ã€äºŒå‰æ ‘çš„å±‚åºéå† II

## ğŸ’» Javaä»£ç å®ç°

### è§£æ³•ä¸€ï¼šä½¿ç”¨åŒç«¯é˜Ÿåˆ—ï¼ˆæ¨èï¼‰

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    public List<List<Integer>> zigzagLevelOrder(TreeNode root) {
        // åˆ›å»ºç»“æœåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨é”¯é½¿å½¢éå†çš„ç»“æœ
        List<List<Integer>> result = new ArrayList<>();
        
        // è¾¹ç•Œæƒ…å†µå¤„ç†ï¼šå¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºç»“æœ
        if (root == null) {
            return result;
        }
        
        // åˆ›å»ºé˜Ÿåˆ—ï¼Œç”¨äºå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰
        Queue<TreeNode> queue = new LinkedList<>();
        // å°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
        queue.offer(root);
        
        // å±‚æ•°è®¡æ•°å™¨ï¼Œç”¨äºåˆ¤æ–­å½“å‰å±‚æ˜¯å¥‡æ•°å±‚è¿˜æ˜¯å¶æ•°å±‚
        // ä»ç¬¬0å±‚å¼€å§‹ï¼ˆæ ¹èŠ‚ç‚¹æ‰€åœ¨å±‚ï¼‰
        int level = 0;
        
        // å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œè¯´æ˜è¿˜æœ‰èŠ‚ç‚¹éœ€è¦å¤„ç†
        while (!queue.isEmpty()) {
            // åˆ›å»ºå½“å‰å±‚çš„å€¼åˆ—è¡¨
            List<Integer> currentLevel = new ArrayList<>();
            
            // è®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹æ•°é‡
            int levelSize = queue.size();
            
            // éå†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹
            for (int i = 0; i < levelSize; i++) {
                // ä»é˜Ÿåˆ—ä¸­å–å‡ºå½“å‰èŠ‚ç‚¹
                TreeNode currentNode = queue.poll();
                
                // æ ¹æ®å±‚æ•°çš„å¥‡å¶æ€§å†³å®šæ·»åŠ é¡ºåº
                if (level % 2 == 0) {
                    // å¶æ•°å±‚ï¼ˆ0, 2, 4...ï¼‰ï¼šä»å·¦åˆ°å³ï¼Œé¡ºåºæ·»åŠ 
                    currentLevel.add(currentNode.val);
                } else {
                    // å¥‡æ•°å±‚ï¼ˆ1, 3, 5...ï¼‰ï¼šä»å³åˆ°å·¦ï¼Œé€†åºæ·»åŠ ï¼ˆæ·»åŠ åˆ°åˆ—è¡¨å¼€å¤´ï¼‰
                    currentLevel.add(0, currentNode.val);
                }
                
                // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å·¦å­èŠ‚ç‚¹ï¼Œå°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (currentNode.left != null) {
                    queue.offer(currentNode.left);
                }
                
                // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å³å­èŠ‚ç‚¹ï¼Œå°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (currentNode.right != null) {
                    queue.offer(currentNode.right);
                }
            }
            
            // å°†å½“å‰å±‚çš„å€¼åˆ—è¡¨åŠ å…¥æœ€ç»ˆç»“æœ
            result.add(currentLevel);
            // å±‚æ•°åŠ 1ï¼Œè¿›å…¥ä¸‹ä¸€å±‚
            level++;
        }
        
        // è¿”å›é”¯é½¿å½¢éå†çš„ç»“æœ
        return result;
    }
}
```

### è§£æ³•äºŒï¼šä½¿ç”¨ä¸¤ä¸ªæ ˆï¼ˆå¦ä¸€ç§æ€è·¯ï¼‰

```java
class Solution {
    public List<List<Integer>> zigzagLevelOrder(TreeNode root) {
        List<List<Integer>> result = new ArrayList<>();
        if (root == null) return result;
        
        // ä½¿ç”¨ä¸¤ä¸ªæ ˆäº¤æ›¿å¤„ç†
        Stack<TreeNode> stack1 = new Stack<>();  // ä»å·¦åˆ°å³çš„å±‚
        Stack<TreeNode> stack2 = new Stack<>();  // ä»å³åˆ°å·¦çš„å±‚
        
        stack1.push(root);
        
        while (!stack1.isEmpty() || !stack2.isEmpty()) {
            List<Integer> currentLevel = new ArrayList<>();
            
            if (!stack1.isEmpty()) {
                // å½“å‰å±‚ä»å·¦åˆ°å³å¤„ç†
                while (!stack1.isEmpty()) {
                    TreeNode node = stack1.pop();
                    currentLevel.add(node.val);
                    
                    // ä¸‹ä¸€å±‚è¦ä»å³åˆ°å·¦ï¼Œæ‰€ä»¥å…ˆå·¦åå³å…¥æ ˆ
                    if (node.left != null) stack2.push(node.left);
                    if (node.right != null) stack2.push(node.right);
                }
            } else {
                // å½“å‰å±‚ä»å³åˆ°å·¦å¤„ç†
                while (!stack2.isEmpty()) {
                    TreeNode node = stack2.pop();
                    currentLevel.add(node.val);
                    
                    // ä¸‹ä¸€å±‚è¦ä»å·¦åˆ°å³ï¼Œæ‰€ä»¥å…ˆå³åå·¦å…¥æ ˆ
                    if (node.right != null) stack1.push(node.right);
                    if (node.left != null) stack1.push(node.left);
                }
            }
            
            result.add(currentLevel);
        }
        
        return result;
    }
}
```

## ğŸ“š å­¦ä¹ å»ºè®®

### 1. ç†è§£é”¯é½¿å½¢éå†çš„æ ¸å¿ƒæ€æƒ³

**éå†é¡ºåº**ï¼š
- **å¶æ•°å±‚**ï¼ˆ0, 2, 4...ï¼‰ï¼šä»å·¦åˆ°å³
- **å¥‡æ•°å±‚**ï¼ˆ1, 3, 5...ï¼‰ï¼šä»å³åˆ°å·¦

**ç¤ºä¾‹**ï¼š
```
äºŒå‰æ ‘ï¼š
    3
   / \
  9  20
     / \
    15  7

é”¯é½¿å½¢éå†ï¼š
ç¬¬0å±‚ï¼ˆå¶æ•°ï¼‰ï¼š[3]           â† ä»å·¦åˆ°å³
ç¬¬1å±‚ï¼ˆå¥‡æ•°ï¼‰ï¼š[20, 9]       â† ä»å³åˆ°å·¦  
ç¬¬2å±‚ï¼ˆå¶æ•°ï¼‰ï¼š[15, 7]       â† ä»å·¦åˆ°å³
```

### 2. ç®—æ³•è¿‡ç¨‹å¯è§†åŒ–

**ç¤ºä¾‹äºŒå‰æ ‘**ï¼š
```
    3
   / \
  9  20
     / \
    15  7
```

**æ‰§è¡Œè¿‡ç¨‹**ï¼š
```
åˆå§‹çŠ¶æ€ï¼š
é˜Ÿåˆ—: [3], level=0

ç¬¬0å±‚ï¼ˆå¶æ•°å±‚ï¼‰ï¼š
å¤„ç†èŠ‚ç‚¹3 â†’ currentLevel = [3]
åŠ å…¥å­èŠ‚ç‚¹9,20 â†’ é˜Ÿåˆ—: [9, 20]
ä¿å­˜ç»“æœ: result = [[3]]

ç¬¬1å±‚ï¼ˆå¥‡æ•°å±‚ï¼‰ï¼š
level=1, å¤„ç†èŠ‚ç‚¹9,20
èŠ‚ç‚¹9 â†’ currentLevel = [20] (é€†åºæ·»åŠ )
èŠ‚ç‚¹20 â†’ currentLevel = [20, 9] (ç»§ç»­é€†åºæ·»åŠ )
åŠ å…¥å­èŠ‚ç‚¹15,7 â†’ é˜Ÿåˆ—: [15, 7]
ä¿å­˜ç»“æœ: result = [[3], [20,9]]

ç¬¬2å±‚ï¼ˆå¶æ•°å±‚ï¼‰ï¼š
level=2, å¤„ç†èŠ‚ç‚¹15,7
èŠ‚ç‚¹15 â†’ currentLevel = [15]
èŠ‚ç‚¹7 â†’ currentLevel = [15, 7] (é¡ºåºæ·»åŠ )
ä¿å­˜ç»“æœ: result = [[3], [20,9], [15,7]]
```

### 3. å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n) - æ¯ä¸ªèŠ‚ç‚¹è¢«è®¿é—®ä¸€æ¬¡
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n) - é˜Ÿåˆ—æœ€å¤šå­˜å‚¨nä¸ªèŠ‚ç‚¹

### 4. å…³é”®æŠ€å·§è¯¦è§£

**å±‚æ•°åˆ¤æ–­ä¸æ·»åŠ é¡ºåº**ï¼š
```java
if (level % 2 == 0) {
    // å¶æ•°å±‚ï¼šé¡ºåºæ·»åŠ ï¼ˆä»å·¦åˆ°å³ï¼‰
    currentLevel.add(currentNode.val);
} else {
    // å¥‡æ•°å±‚ï¼šé€†åºæ·»åŠ ï¼ˆä»å³åˆ°å·¦ï¼‰
    currentLevel.add(0, currentNode.val);
}
```

**ä¸ºä»€ä¹ˆåœ¨å¥‡æ•°å±‚æ·»åŠ åˆ°åˆ—è¡¨å¼€å¤´ï¼Ÿ**
```java
// å‡è®¾å½“å‰å±‚èŠ‚ç‚¹æŒ‰é˜Ÿåˆ—é¡ºåºæ˜¯ï¼šA, B, C
// æˆ‘ä»¬å¸Œæœ›ç»“æœæ˜¯ï¼šC, B, A

// å¤„ç†è¿‡ç¨‹ï¼š
// å¤„ç†A: currentLevel = [A] â†’ æ·»åŠ åˆ°å¼€å¤´: [A]
// å¤„ç†B: currentLevel = [B, A] â†’ æ·»åŠ åˆ°å¼€å¤´: [B, A]  
// å¤„ç†C: currentLevel = [C, B, A] â†’ æ·»åŠ åˆ°å¼€å¤´: [C, B, A]
// å¾—åˆ°é€†åºç»“æœ
```

### 5. å­¦ä¹ è·¯å¾„å»ºè®®

1. **å…ˆæŒæ¡æ™®é€šå±‚æ¬¡éå†**ï¼šç†è§£BFSåœ¨äºŒå‰æ ‘ä¸­çš„åº”ç”¨
2. **ç†è§£é”¯é½¿å½¢éœ€æ±‚**ï¼šæ˜ç™½å¥‡å¶å±‚ä¸åŒéå†æ–¹å‘çš„æ„ä¹‰
3. **æŒæ¡åŒç«¯é˜Ÿåˆ—æŠ€å·§**ï¼šå­¦ä¼šåœ¨åˆ—è¡¨å¼€å¤´å’Œç»“å°¾æ·»åŠ å…ƒç´ 
4. **ç»ƒä¹ ç›¸ä¼¼é¢˜ç›®**ï¼š
    - 102. äºŒå‰æ ‘çš„å±‚åºéå†
    - 107. äºŒå‰æ ‘çš„å±‚åºéå† II
    - 199. äºŒå‰æ ‘çš„å³è§†å›¾

### 6. è°ƒè¯•æŠ€å·§

**æ·»åŠ è°ƒè¯•ä¿¡æ¯**ï¼š
```java
public List<List<Integer>> zigzagLevelOrder(TreeNode root) {
    List<List<Integer>> result = new ArrayList<>();
    if (root == null) return result;
    
    Queue<TreeNode> queue = new LinkedList<>();
    queue.offer(root);
    int level = 0;
    
    while (!queue.isEmpty()) {
        int levelSize = queue.size();
        List<Integer> currentLevel = new ArrayList<>();
        
        System.out.println("å¤„ç†ç¬¬ " + level + " å±‚ï¼Œæœ‰ " + levelSize + " ä¸ªèŠ‚ç‚¹");
        System.out.println("å½“å‰å±‚æ˜¯ " + (level % 2 == 0 ? "å¶æ•°å±‚ï¼ˆä»å·¦åˆ°å³ï¼‰" : "å¥‡æ•°å±‚ï¼ˆä»å³åˆ°å·¦ï¼‰"));
        
        for (int i = 0; i < levelSize; i++) {
            TreeNode currentNode = queue.poll();
            System.out.println("  å¤„ç†èŠ‚ç‚¹: " + currentNode.val);
            
            if (level % 2 == 0) {
                currentLevel.add(currentNode.val);
                System.out.println("    é¡ºåºæ·»åŠ åˆ°åˆ—è¡¨: " + currentLevel);
            } else {
                currentLevel.add(0, currentNode.val);
                System.out.println("    é€†åºæ·»åŠ åˆ°åˆ—è¡¨: " + currentLevel);
            }
            
            if (currentNode.left != null) {
                queue.offer(currentNode.left);
                System.out.println("    åŠ å…¥å·¦å­èŠ‚ç‚¹: " + currentNode.left.val);
            }
            if (currentNode.right != null) {
                queue.offer(currentNode.right);
                System.out.println("    åŠ å…¥å³å­èŠ‚ç‚¹: " + currentNode.right.val);
            }
        }
        
        result.add(currentLevel);
        System.out.println("ç¬¬ " + level + " å±‚ç»“æœ: " + currentLevel);
        level++;
    }
    
    return result;
}
```

### 7. å¸¸è§é”™è¯¯é¿å…

```java
// é”™è¯¯ï¼šå±‚æ•°è®¡æ•°é”™è¯¯
// åº”è¯¥åœ¨æ¯å±‚å¤„ç†å®Œåæ‰level++

// é”™è¯¯ï¼šæ·»åŠ é¡ºåºåˆ¤æ–­é”™è¯¯
if (level % 2 == 1)  // åº”è¯¥ç”¨ level % 2 == 0 åˆ¤æ–­å¶æ•°å±‚

// é”™è¯¯ï¼šå¿˜è®°è®°å½•levelSize
// å¿…é¡» int levelSize = queue.size() åœ¨å¾ªç¯å‰è®°å½•

// é”™è¯¯ï¼šåœ¨é€†åºå±‚é”™è¯¯åœ°æ·»åŠ å­èŠ‚ç‚¹
// æ·»åŠ å­èŠ‚ç‚¹çš„é¡ºåºå§‹ç»ˆåº”è¯¥æ˜¯å…ˆå·¦åå³ï¼Œä¸å½“å‰å±‚éå†æ–¹å‘æ— å…³
```

## ğŸ¯ æ ¸å¿ƒæ€æƒ³æ€»ç»“

**é”¯é½¿å½¢å±‚åºéå†çš„ç²¾é«“**ï¼š

### 1. å±‚æ¬¡éå†åŸºç¡€
- ä½¿ç”¨é˜Ÿåˆ—è¿›è¡ŒBFSéå†
- è®°å½•æ¯å±‚çš„èŠ‚ç‚¹æ•°é‡

### 2. æ–¹å‘æ§åˆ¶
- æ ¹æ®å±‚æ•°çš„å¥‡å¶æ€§å†³å®šéå†æ–¹å‘
- å¶æ•°å±‚ï¼šä»å·¦åˆ°å³ï¼ˆé¡ºåºæ·»åŠ ï¼‰
- å¥‡æ•°å±‚ï¼šä»å³åˆ°å·¦ï¼ˆé€†åºæ·»åŠ ï¼‰

### 3. åˆ—è¡¨æ“ä½œæŠ€å·§
- ä½¿ç”¨ `add(0, element)` åœ¨åˆ—è¡¨å¼€å¤´æ’å…¥å®ç°é€†åº
- æˆ–è€…ä½¿ç”¨åŒç«¯é˜Ÿåˆ—åœ¨ä¸¤ç«¯æ“ä½œ

### 4. å±‚æ•°ç®¡ç†
- ä»0å¼€å§‹è®¡æ•°å±‚æ•°
- æ¯å¤„ç†å®Œä¸€å±‚ï¼Œå±‚æ•°åŠ 1

## ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯
- å›¾å½¢åŒ–æ˜¾ç¤ºäºŒå‰æ ‘ç»“æ„
- æ•°æ®åºåˆ—åŒ–çš„ç‰¹æ®Šæ ¼å¼
- æŸäº›ç‰¹å®šç®—æ³•çš„è¾“å…¥è¦æ±‚
- æ ‘å½¢ç»“æ„çš„å¯è§†åŒ–å·¥å…·

**é‡è¦æç¤º**ï¼šè¿™æ˜¯å±‚æ¬¡éå†çš„ç»å…¸å˜ç§ï¼ŒæŒæ¡åå¯ä»¥è§£å†³è®¸å¤šç±»ä¼¼çš„æ ‘å½¢éå†é—®é¢˜ã€‚å»ºè®®å…ˆå½»åº•ç†è§£æ™®é€šå±‚æ¬¡éå†ï¼Œå†å­¦ä¹ è¿™ä¸ªå˜ç§ã€‚

é€šè¿‡è¿™é“é¢˜ï¼Œä½ å°†æŒæ¡BFSåœ¨å¤æ‚éå†éœ€æ±‚ä¸­çš„åº”ç”¨ï¼Œè¿™æ˜¯è§£å†³è®¸å¤šæ ‘å½¢ç»“æ„é—®é¢˜çš„é‡è¦åŸºç¡€ï¼