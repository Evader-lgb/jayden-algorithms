# 旋转图像 - 矩阵顺时针旋转90度

## 题目理解
给定一个 n × n 的二维矩阵，要求将矩阵顺时针旋转90度，并且必须原地修改矩阵（不能使用额外的矩阵）。

## 解题思路

### 总思路
使用"转置+翻转"的方法：先对矩阵进行转置操作，然后对每一行进行翻转。

### 分步骤
1. **转置矩阵**：将矩阵的行和列互换（`matrix[i][j]` 与 `matrix[j][i]` 交换）
2. **翻转每一行**：对每一行进行水平翻转（`matrix[i][j]` 与 `matrix[i][n-1-j]` 交换）

## 归类说明
- **主要分类**：数组、矩阵操作
- **算法技巧**：转置、翻转
- **数据结构**：二维数组
- **相关题目**：螺旋矩阵、矩阵置零、有效的数独

## Java代码实现

```java
class Solution {
    public void rotate(int[][] matrix) {
        int n = matrix.length;
        
        // 步骤1：转置矩阵（行列互换）
        for (int i = 0; i < n; i++) {
            for (int j = i; j < n; j++) {
                // 交换 matrix[i][j] 和 matrix[j][i]
                int temp = matrix[i][j];
                matrix[i][j] = matrix[j][i];
                matrix[j][i] = temp;
            }
        }
        
        // 步骤2：翻转每一行（水平翻转）
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n / 2; j++) {
                // 交换 matrix[i][j] 和 matrix[i][n-1-j]
                int temp = matrix[i][j];
                matrix[i][j] = matrix[i][n - 1 - j];
                matrix[i][n - 1 - j] = temp;
            }
        }
    }
}
```

## 关键点详细解析

### 1. 为什么转置+翻转等于旋转90度？

**原始矩阵**：
```
1 2 3
4 5 6
7 8 9
```

**转置后**（行列互换）：
```
1 4 7
2 5 8
3 6 9
```

**水平翻转后**：
```
7 4 1
8 5 2
9 6 3
```

**顺时针旋转90度**的结果确实是：
```
7 4 1
8 5 2
9 6 3
```

### 2. 转置操作的细节

```java
for (int i = 0; i < n; i++) {
    for (int j = i; j < n; j++) {
        // 交换 matrix[i][j] 和 matrix[j][i]
        int temp = matrix[i][j];
        matrix[i][j] = matrix[j][i];
        matrix[j][i] = temp;
    }
}
```

- 注意内层循环从 `j = i` 开始，不是从 `j = 0`
- 这样可以避免重复交换（如果从0开始，会交换两次，等于没交换）
- 只交换矩阵的右上三角部分

### 3. 翻转操作的细节

```java
for (int i = 0; i < n; i++) {
    for (int j = 0; j < n / 2; j++) {
        // 交换 matrix[i][j] 和 matrix[i][n-1-j]
        int temp = matrix[i][j];
        matrix[i][j] = matrix[i][n - 1 - j];
        matrix[i][n - 1 - j] = temp;
    }
}
```

- 只需要遍历到 `n/2`，因为交换是对称的
- 当 `n` 为奇数时，中间元素不需要交换

## 学习建议

### 1. 理解矩阵操作
- **转置**：行变列，列变行
- **翻转**：水平翻转（左右镜像）或垂直翻转（上下镜像）
- 不同的组合可以实现不同角度的旋转

### 2. 掌握原地操作技巧
- 注意交换的顺序，避免数据丢失
- 理解循环边界条件，避免重复操作

### 3. 相关题目练习
1. **螺旋矩阵**（LeetCode 54）- 按螺旋顺序遍历矩阵
2. **矩阵置零**（LeetCode 73）- 原地修改矩阵
3. **有效的数独**（LeetCode 36）- 矩阵遍历和验证

### 4. 调试技巧
- 使用小矩阵（2×2, 3×3）手动验证
- 打印每一步操作后的矩阵状态
- 特别注意边界情况和奇数尺寸矩阵

这个代码可以直接复制到IDE中运行，不会出现语法错误。