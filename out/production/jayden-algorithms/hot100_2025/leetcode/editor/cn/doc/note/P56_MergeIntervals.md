# 56. åˆå¹¶åŒºé—´

## ğŸ“ è§£é¢˜æ€è·¯ï¼ˆæ€»åˆ†ç»“æ„ï¼‰

### æ€»æ€è·¯
å…ˆå¯¹åŒºé—´æŒ‰ç…§èµ·å§‹ä½ç½®æ’åºï¼Œç„¶åéå†åŒºé—´åˆ—è¡¨ï¼Œåˆå¹¶é‡å çš„åŒºé—´ã€‚

### åˆ†æ­¥éª¤è¯¦è§£
1. **è¾¹ç•Œå¤„ç†**ï¼šå¦‚æœåŒºé—´æ•°ç»„ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªåŒºé—´ï¼Œç›´æ¥è¿”å›
2. **æ’åºåŒºé—´**ï¼šæŒ‰ç…§æ¯ä¸ªåŒºé—´çš„èµ·å§‹ä½ç½®è¿›è¡Œæ’åº
3. **åˆå§‹åŒ–ç»“æœ**ï¼šå°†ç¬¬ä¸€ä¸ªåŒºé—´åŠ å…¥ç»“æœåˆ—è¡¨
4. **éå†åˆå¹¶**ï¼šä»ç¬¬äºŒä¸ªåŒºé—´å¼€å§‹ï¼Œä¸ç»“æœåˆ—è¡¨æœ€åä¸€ä¸ªåŒºé—´æ¯”è¾ƒ
    - å¦‚æœå½“å‰åŒºé—´ä¸æœ€åä¸€ä¸ªåŒºé—´é‡å ï¼Œåˆå¹¶å®ƒä»¬
    - å¦‚æœä¸é‡å ï¼Œå°†å½“å‰åŒºé—´åŠ å…¥ç»“æœåˆ—è¡¨
5. **è¿”å›ç»“æœ**ï¼šå°†ç»“æœåˆ—è¡¨è½¬æ¢ä¸ºæ•°ç»„è¿”å›

## ğŸ·ï¸ ç®—æ³•å½’ç±»

**ä¸»è¦å½’ç±»**ï¼šåŒºé—´é—®é¢˜ã€æ’åºã€è´ªå¿ƒç®—æ³•  
**ç›¸å…³çŸ¥è¯†ç‚¹**ï¼šåŒºé—´åˆå¹¶ã€è‡ªå®šä¹‰æ’åºã€æ•°ç»„éå†  
**éš¾åº¦çº§åˆ«**ï¼šä¸­ç­‰  
**ç›¸ä¼¼é¢˜å‹**ï¼šæ’å…¥åŒºé—´ã€æ— é‡å åŒºé—´ã€ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ

## ğŸ’» Javaä»£ç å®ç°

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;
import java.util.List;

class Solution {
    public int[][] merge(int[][] intervals) {
        // æ­¥éª¤1ï¼šè¾¹ç•Œæƒ…å†µå¤„ç†
        // å¦‚æœåŒºé—´æ•°ç»„ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªåŒºé—´ï¼Œç›´æ¥è¿”å›
        if (intervals == null || intervals.length <= 1) {
            return intervals;
        }
        
        // æ­¥éª¤2ï¼šæŒ‰ç…§åŒºé—´çš„èµ·å§‹ä½ç½®è¿›è¡Œæ’åº
        // ä½¿ç”¨Lambdaè¡¨è¾¾å¼å®šä¹‰æ¯”è¾ƒå™¨ï¼ŒæŒ‰æ¯ä¸ªåŒºé—´çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆèµ·å§‹ä½ç½®ï¼‰æ’åº
        Arrays.sort(intervals, (a, b) -> a[0] - b[0]);
        
        // æ­¥éª¤3ï¼šåˆ›å»ºç»“æœåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨åˆå¹¶åçš„åŒºé—´
        List<int[]> result = new ArrayList<>();
        // å°†ç¬¬ä¸€ä¸ªåŒºé—´åŠ å…¥ç»“æœåˆ—è¡¨ä½œä¸ºèµ·å§‹
        result.add(intervals[0]);
        
        // æ­¥éª¤4ï¼šéå†å‰©ä½™çš„åŒºé—´ï¼Œè¿›è¡Œåˆå¹¶æ“ä½œ
        for (int i = 1; i < intervals.length; i++) {
            // è·å–å½“å‰åŒºé—´
            int[] currentInterval = intervals[i];
            // è·å–ç»“æœåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªåŒºé—´ï¼ˆæœ€è¿‘æ·»åŠ çš„åŒºé—´ï¼‰
            int[] lastInterval = result.get(result.size() - 1);
            
            // æ­¥éª¤5ï¼šæ£€æŸ¥å½“å‰åŒºé—´æ˜¯å¦ä¸æœ€åä¸€ä¸ªåŒºé—´é‡å 
            // å¦‚æœå½“å‰åŒºé—´çš„èµ·å§‹ä½ç½® <= æœ€åä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®ï¼Œè¯´æ˜æœ‰é‡å 
            if (currentInterval[0] <= lastInterval[1]) {
                // æ­¥éª¤6ï¼šåˆå¹¶åŒºé—´ - æ›´æ–°æœ€åä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®
                // å–ä¸¤ä¸ªåŒºé—´ç»“æŸä½ç½®çš„è¾ƒå¤§å€¼ä½œä¸ºæ–°çš„ç»“æŸä½ç½®
                lastInterval[1] = Math.max(lastInterval[1], currentInterval[1]);
            } else {
                // æ­¥éª¤7ï¼šæ²¡æœ‰é‡å ï¼Œå°†å½“å‰åŒºé—´æ·»åŠ åˆ°ç»“æœåˆ—è¡¨
                result.add(currentInterval);
            }
        }
        
        // æ­¥éª¤8ï¼šå°†ç»“æœåˆ—è¡¨è½¬æ¢ä¸ºäºŒç»´æ•°ç»„å¹¶è¿”å›
        return result.toArray(new int[result.size()][]);
    }
}
```

## ğŸ“š å­¦ä¹ å»ºè®®

### 1. ç†è§£æ ¸å¿ƒåˆå¹¶é€»è¾‘

**å…³é”®åˆå¹¶æ¡ä»¶**ï¼š
```java
if (currentInterval[0] <= lastInterval[1]) {
    // æœ‰é‡å ï¼Œåˆå¹¶åŒºé—´
    lastInterval[1] = Math.max(lastInterval[1], currentInterval[1]);
}
```

**ä¸ºä»€ä¹ˆè¿™æ ·åˆ¤æ–­é‡å ï¼Ÿ**
- å› ä¸ºåŒºé—´å·²ç»æŒ‰èµ·å§‹ä½ç½®æ’åº
- å¦‚æœ `current.start <= last.end`ï¼Œè¯´æ˜ä¸¤ä¸ªåŒºé—´æœ‰é‡å éƒ¨åˆ†
- éœ€è¦åˆå¹¶ï¼Œå–ä¸¤ä¸ªåŒºé—´ç»“æŸä½ç½®çš„è¾ƒå¤§å€¼

### 2. ç®—æ³•è¿‡ç¨‹å¯è§†åŒ–

**ç¤ºä¾‹**ï¼š`intervals = [[1,3],[2,6],[8,10],[15,18]]`

**æ‰§è¡Œè¿‡ç¨‹**ï¼š
```
æ’åºåï¼š[[1,3],[2,6],[8,10],[15,18]]

æ­¥éª¤ï¼š
1. åˆå§‹ï¼šresult = [[1,3]]
2. å¤„ç†[2,6]ï¼š2 <= 3 â†’ é‡å  â†’ åˆå¹¶ä¸º[1,6]
3. å¤„ç†[8,10]ï¼š8 > 6 â†’ ä¸é‡å  â†’ æ·»åŠ [8,10]
4. å¤„ç†[15,18]ï¼š15 > 10 â†’ ä¸é‡å  â†’ æ·»åŠ [15,18]

æœ€ç»ˆç»“æœï¼š[[1,6],[8,10],[15,18]]
```

### 3. å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n log n) - æ’åºéœ€è¦O(n log n)ï¼Œéå†éœ€è¦O(n)
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n) - å­˜å‚¨ç»“æœéœ€è¦O(n)ç©ºé—´

### 4. ä¸å…¶ä»–è§£æ³•å¯¹æ¯”

**ä½¿ç”¨æ ˆçš„è§£æ³•**ï¼š
```java
// ä¹Ÿå¯ä»¥ä½¿ç”¨æ ˆï¼Œä½†æ€è·¯ç±»ä¼¼ï¼Œæ’åºåå…¥æ ˆå‡ºæ ˆåˆ¤æ–­åˆå¹¶
```

### 5. å­¦ä¹ è·¯å¾„å»ºè®®

1. **ç†è§£æ’åºçš„é‡è¦æ€§**ï¼šæ’åºè®©é‡å åˆ¤æ–­å˜å¾—ç®€å•
2. **æŒæ¡åˆå¹¶æ¡ä»¶**ï¼šç†è§£é‡å çš„åˆ¤æ–­é€»è¾‘
3. **ç»ƒä¹ ç›¸ä¼¼é¢˜ç›®**ï¼š
    - 57. æ’å…¥åŒºé—´
    - 435. æ— é‡å åŒºé—´
    - 252. ä¼šè®®å®¤
4. **æŒæ¡åˆ—è¡¨è½¬æ•°ç»„**ï¼š`list.toArray(new int[0][])`

### 6. å…³é”®æŠ€å·§è¯¦è§£

**è‡ªå®šä¹‰æ’åºçš„å¤šç§å†™æ³•**ï¼š
```java
// æ–¹å¼1ï¼šLambdaè¡¨è¾¾å¼ï¼ˆæœ€ç®€æ´ï¼‰
Arrays.sort(intervals, (a, b) -> a[0] - b[0]);

// æ–¹å¼2ï¼šComparator.comparingInt
Arrays.sort(intervals, Comparator.comparingInt(a -> a[0]));

// æ–¹å¼3ï¼šåŒ¿åå†…éƒ¨ç±»
Arrays.sort(intervals, new Comparator<int[]>() {
    public int compare(int[] a, int[] b) {
        return a[0] - b[0];
    }
});
```

**åˆå¹¶çš„æ•°å­¦åŸç†**ï¼š
```
åŒºé—´A: [a1, a2]
åŒºé—´B: [b1, b2]

é‡å æ¡ä»¶ï¼šb1 <= a2
åˆå¹¶åï¼š[a1, max(a2, b2)]
```

### 7. è°ƒè¯•æŠ€å·§

**æ·»åŠ è°ƒè¯•ä¿¡æ¯**ï¼š
```java
public int[][] merge(int[][] intervals) {
    if (intervals == null || intervals.length <= 1) {
        return intervals;
    }
    
    Arrays.sort(intervals, (a, b) -> a[0] - b[0]);
    
    System.out.println("æ’åºåçš„åŒºé—´:");
    for (int[] interval : intervals) {
        System.out.println(Arrays.toString(interval));
    }
    
    List<int[]> result = new ArrayList<>();
    result.add(intervals[0]);
    
    for (int i = 1; i < intervals.length; i++) {
        int[] current = intervals[i];
        int[] last = result.get(result.size() - 1);
        
        System.out.printf("æ¯”è¾ƒ: æœ€åä¸€ä¸ªåŒºé—´=%s, å½“å‰åŒºé—´=%s", 
            Arrays.toString(last), Arrays.toString(current));
        
        if (current[0] <= last[1]) {
            int newEnd = Math.max(last[1], current[1]);
            System.out.printf(" â†’ é‡å ï¼Œåˆå¹¶ä¸º[%d,%d]\n", last[0], newEnd);
            last[1] = newEnd;
        } else {
            System.out.println(" â†’ ä¸é‡å ï¼Œç›´æ¥æ·»åŠ ");
            result.add(current);
        }
    }
    
    return result.toArray(new int[result.size()][]);
}
```

### 8. å¸¸è§é”™è¯¯é¿å…

```java
// é”™è¯¯ï¼šå¿˜è®°æ’åº
// ä¸æ’åºä¼šå¯¼è‡´åˆå¹¶é€»è¾‘é”™è¯¯

// é”™è¯¯ï¼šé‡å æ¡ä»¶åˆ¤æ–­é”™è¯¯
if (current[0] < last[1])  // åº”è¯¥æ˜¯ <=

// é”™è¯¯ï¼šåˆå¹¶æ—¶å–æœ€å°å€¼
last[1] = Math.min(last[1], current[1]);  // é”™è¯¯ï¼åº”è¯¥å–æœ€å¤§å€¼

// é”™è¯¯ï¼šæ•°ç»„è½¬æ¢é”™è¯¯
return result.toArray();  // åº”è¯¥æŒ‡å®šç±»å‹
```

### 9. è¾¹ç•Œæƒ…å†µå¤„ç†

**ç‰¹æ®Šæµ‹è¯•ç”¨ä¾‹**ï¼š
```java
// å®Œå…¨åŒ…å«çš„åŒºé—´
[[1,4],[2,3]] â†’ [[1,4]]

// ç«¯ç‚¹ç›¸æ¥çš„åŒºé—´  
[[1,2],[2,3]] â†’ [[1,3]]  // 2=2ï¼Œåº”è¯¥åˆå¹¶

// å•ä¸ªåŒºé—´
[[1,2]] â†’ [[1,2]]

// ç©ºæ•°ç»„
[] â†’ []
```

## ğŸ¯ æ ¸å¿ƒæ€æƒ³æ€»ç»“

**åˆå¹¶åŒºé—´é—®é¢˜çš„ç²¾é«“**ï¼š

### 1. æ’åºæ˜¯å…³é”®
- æŒ‰èµ·å§‹ä½ç½®æ’åºåï¼Œé‡å åˆ¤æ–­å˜å¾—ç®€å•
- åªéœ€è¦æ¯”è¾ƒå½“å‰åŒºé—´å’Œæœ€åä¸€ä¸ªåŒºé—´

### 2. è´ªå¿ƒæ€æƒ³
- æ¯æ¬¡åªè€ƒè™‘å½“å‰åŒºé—´å’Œå·²åˆå¹¶çš„æœ€åä¸€ä¸ªåŒºé—´
- å±€éƒ¨æœ€ä¼˜å¯¼è‡´å…¨å±€æœ€ä¼˜

### 3. åˆå¹¶æ¡ä»¶
- `current.start <= last.end` è¡¨ç¤ºé‡å 
- åˆå¹¶æ—¶å–ç»“æŸä½ç½®çš„è¾ƒå¤§å€¼

### 4. åˆ—è¡¨æ“ä½œ
- ä½¿ç”¨åŠ¨æ€æ•°ç»„æ–¹ä¾¿æ·»åŠ å’Œä¿®æ”¹
- æœ€åè½¬æ¢ä¸ºè¦æ±‚çš„æ•°ç»„æ ¼å¼

## ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯
- æ—¥å†æ—¥ç¨‹å®‰æ’
- èµ„æºæ—¶é—´åˆ†é…
- é¡¹ç›®æ—¶é—´çº¿ç®¡ç†
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

**é‡è¦æç¤º**ï¼šè¿™æ˜¯åŒºé—´ç±»é—®é¢˜çš„ç»å…¸é¢˜ç›®ï¼ŒæŒæ¡åå¯ä»¥è§£å†³è®¸å¤šç±»ä¼¼çš„åŒºé—´åˆå¹¶ã€åŒºé—´è°ƒåº¦é—®é¢˜ã€‚å»ºè®®å¤šç»ƒä¹ å‡ ä¸ªå˜ç§é¢˜ç›®æ¥åŠ æ·±ç†è§£ï¼

é€šè¿‡è¿™é“é¢˜ï¼Œä½ å°†æŒæ¡æ’åºå’Œè´ªå¿ƒç®—æ³•åœ¨åŒºé—´é—®é¢˜ä¸­çš„åº”ç”¨ï¼Œè¿™æ˜¯è§£å†³è®¸å¤šå®é™…è°ƒåº¦é—®é¢˜çš„åŸºç¡€æŠ€èƒ½ï¼